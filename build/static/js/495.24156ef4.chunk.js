"use strict";(self.webpackChunkteam=self.webpackChunkteam||[]).push([[495],{62104:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var i=n(72791),a=n(64880),o=n(29439),r=n(30303),s=n(78792),l=n(22266),c=n(59434),d=n(63254),u=(n(23267),n(80184)),f=function(){var e=(0,i.useState)(null),t=(0,o.Z)(e,2),n=t[0],a=t[1],f=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user}));return(0,i.useEffect)((function(){d.ZP.get("/api/course/get/".concat(f.course.id,"/students")).then((function(e){a(e.data)})).catch((function(){return a([])}))}),[f]),(0,u.jsx)(r.Z,{className:"list",children:n?(0,u.jsx)(s.ZP,{className:"demo-loadmore-list",itemLayout:"horizontal",dataSource:n,renderItem:function(e){return(0,u.jsx)(s.ZP.Item,{children:(0,u.jsx)(s.ZP.Item.Meta,{avatar:(0,u.jsx)(l.C,{}),title:e.firstName+" "+e.lastName,description:!0})})}}):(0,u.jsx)(u.Fragment,{children:" "})})},p=function(){var e=(0,i.useState)(null),t=(0,o.Z)(e,2),n=t[0],a=t[1],f=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user}));return(0,i.useEffect)((function(){d.ZP.get("/api/course/get/".concat(f.course.id,"/teachers")).then((function(e){a(e.data)})).catch((function(){return a([])}))}),[f]),(0,u.jsx)(r.Z,{className:"list",children:n?(0,u.jsx)(s.ZP,{className:"demo-loadmore-list",itemLayout:"horizontal",dataSource:n,renderItem:function(e){return(0,u.jsx)(s.ZP.Item,{children:(0,u.jsx)(s.ZP.Item.Meta,{avatar:(0,u.jsx)(l.C,{}),title:e.firstName,description:!0})})}}):(0,u.jsx)(u.Fragment,{children:" "})})},h=n(33972),m=n(13592),x=n(9310),v=n(4942),Z=n(1413),j=n(93433),g=n(87309),y=n(71482),b=n(92995),w=n(36508),C=n(1287),S=function(){var e=(0,i.useState)([]),t=(0,o.Z)(e,2),n=t[0],l=t[1],f=(0,i.useState)({}),p=(0,o.Z)(f,2),h=p[0],m=p[1],x=(0,i.useState)({isOpen:!1,data:{}}),S=(0,o.Z)(x,2),k=(S[0],S[1],(0,a.k6)()),F=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user})),P=(0,i.useCallback)((function(){return new Promise((function(e,t){d.w3.get("/api/forum?courseId=".concat(F.course.id).concat((k.location.search||"").replace("?","&"))).then((function(t){return 200===t.status?e(t.data.data):e([])})).catch((function(e){return t(e)}))}))}),[F.course.id,k.location.search]);(0,i.useEffect)((function(){P().then((function(e){return l(e)}))}),[]);var I=function(e){k.push({search:e?"&filter=".concat(e):""}),P().then((function(e){return l(e)}))};return(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(g.Z,{onClick:function(){return I()},children:"Clear Filter"}),n&&(0,u.jsx)(s.ZP,{className:"demo-loadmore-list",itemLayout:"vertical",dataSource:n,renderItem:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.Z,{style:{marginTop:10},children:[(0,u.jsx)(r.Z,{actions:[(0,u.jsx)(w.Z,{id:e.id,likedByMe:e.likedByMe})].concat((0,j.Z)(e.commentsUrl?[(0,u.jsx)(b.Z,{onClick:function(){return m((0,Z.Z)((0,Z.Z)({},h),{},(0,v.Z)({},e.id,!h[e.id])))}},"comment")]:[])),children:(0,u.jsx)(y.Z,{item:e,mediaKey:"question",onClickTag:function(e){return I(e)}})}),(0,u.jsx)("div",{style:{marginTop:10},children:e.commentsUrl?(0,u.jsx)(C.Z,{question:e,isOpen:h[e.id]}):null})]},e.id)})}})]})},k=n(74165),F=n(15861),P=n(49998),I=n(5954),L=n(49389),M=n(55518),O=n(77979),T=n(28720),N=n(31752),A=n(82622),U=function(){var e,t,n,a,l,f,p,h,m=(0,i.useState)({isOpen:!1,data:{}}),x=(0,o.Z)(m,2),v=x[0],j=x[1],b=(0,i.useState)([]),C=(0,o.Z)(b,2),S=C[0],U=C[1],W=(0,i.useState)(null),z=(0,o.Z)(W,2),D=z[0],E=z[1],Y=(0,O.Z)(),q=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user}));(0,i.useEffect)((function(){d.w3.get("/api/post?courseId=".concat(q.course.id)).then((function(e){U(e.data.posts),console.log(e.data.posts.id)})).catch((function(){return U([])}))}),[q.course.id]);var B=function(){j({isOpen:!v.isOpen,data:{}}),E(null)},R=function(){var e=(0,F.Z)((0,k.Z)().mark((function e(t){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t.file));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,F.Z)((0,k.Z)().mark((function e(t){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.file.url||t.file.preview){e.next=4;break}return e.next=3,Y.init(t.file.originFileObj);case 3:t.file.preview=e.sent;case 4:E((0,Z.Z)((0,Z.Z)({},D),{},{file:t.file}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(r.Z,{style:{height:"100%"},children:[(0,u.jsx)(g.Z,{type:"primary",onClick:B,style:{marginBottom:10},children:"+ Post"}),(0,u.jsx)(P.Z,{title:"Add Post",open:v.isOpen,onOk:function(){if(v.data.title){var e,t,n;console.log(v.data);var i=new FormData;i.append("title",v.data.title),i.append("content",v.data.content),(null===D||void 0===D||null===(e=D.file)||void 0===e?void 0:e.originFileObj)&&i.append("media",null===D||void 0===D||null===(t=D.file)||void 0===t?void 0:t.originFileObj),!v.data.id&&i.append("courseId",q.course.id),((null===v||void 0===v||null===(n=v.data)||void 0===n?void 0:n.tags)||[]).forEach((function(e){i.append("tags[]",e)})),d.w3.post("/api/post".concat(v.data.id?"/".concat(v.data.id):""),i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(201===e.status){if(v.data.id)for(var t=0;t<S.length;t++)v.data.id===e.data.id&&(S[t]=e.data);else S.unshift(e.data);U(S),j({isOpen:!1,data:{}}),E(null)}else console.log(e)})).catch((function(e){console.log(e)}))}},onCancel:B,children:(0,u.jsxs)(I.Z,{style:{marginTop:10},children:[(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(L.Z,{size:"large",placeholder:"Post Title",value:null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.title,onChange:function(e){j((0,Z.Z)((0,Z.Z)({},v),{},{data:(0,Z.Z)((0,Z.Z)({},v.data),{},{title:e.target.value})}))}})}),(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(L.Z,{size:"large",placeholder:"Content",value:null===v||void 0===v||null===(t=v.data)||void 0===t?void 0:t.content,onChange:function(e){j((0,Z.Z)((0,Z.Z)({},v),{},{data:(0,Z.Z)((0,Z.Z)({},v.data),{},{content:e.target.value})}))}})}),(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(T.Z,{name:"tags",list:v.data.tags,onChange:function(e){j((0,Z.Z)((0,Z.Z)({},v),{},{data:(0,Z.Z)((0,Z.Z)({},v.data),{},{tags:e})}))}})}),(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(M.Z,{name:"media",listType:"picture-card",className:"media-uploader",beforeUpload:Y.beforeUploadMedia,customRequest:R,onChange:K,onPreview:function(e){var t=e.fileList;return E((0,Z.Z)((0,Z.Z)({},D),{},{fileList:t}))},fileList:(null===D||void 0===D?void 0:D.fileList)||[],maxCount:1,children:D||null!==(n=v.data)&&void 0!==n&&n.id&&null!==(a=v.data)&&void 0!==a&&null!==(l=a.media)&&void 0!==l&&l.split("post")[1]?(0,u.jsx)("img",{src:(null===D||void 0===D||null===(f=D.file)||void 0===f?void 0:f.preview)||(null===(p=v.data)||void 0===p?void 0:p.media),alt:"media",style:{width:"100%",height:"100%",borderRadius:"6px"}}):(null===D||void 0===D||null===(h=D.fileList)||void 0===h?void 0:h.length)>=1?null:"+ Upload"})})]})}),(0,u.jsx)("div",{id:"scrollableDiv",style:{overflow:"auto",padding:"0 16px"},children:S?(0,u.jsx)(s.ZP,{className:"demo-loadmore-list",itemLayout:"vertical",dataSource:S,renderItem:function(e){return(0,u.jsx)(r.Z,{style:{marginBottom:10},actions:[(0,u.jsx)(w.Z,{id:e.id,likedByMe:e.likedByMe}),(0,u.jsx)(N.Z,{style:{color:"blue"},onClick:function(){return j({isOpen:!0,data:(0,Z.Z)((0,Z.Z)({},e),{},{tags:e.tags.map((function(e){return e.name}))})})}},"edit"),(0,u.jsx)(A.Z,{style:{color:"red"},onClick:function(){return t=e.id,void d.w3.delete("api/post/".concat(t)).then((function(){U((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(e){console.log(e)}));var t},danger:!0},"delete")],children:(0,u.jsx)(y.Z,{item:e,mediaKey:"post"})})}}):(0,u.jsx)(u.Fragment,{children:" "})})]})},W=n(19006),z=n(72426),D=n.n(z),E=function(){var e=(0,i.useState)([]),t=(0,o.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(),s=(0,o.Z)(r,2);s[0],s[1];(0,i.useEffect)((function(){d.Cf.get("/api/getAll").then((function(e){var t=e.data.map((function(e){return{title:e.subject,start:D()(e.startTime),end:D()(e.endTime),location:e.location,lecturer:e.lecturer}}));a(t)}))}),[]);var l=["#f5222d","#fa8c16","#1890ff","#52c41a","#722ed1","#eb2f96"];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,{type:"primary",onClick:function(){d.Cf.get("/google/oauth2").then((function(e){console.log(e)})).catch((function(e){}))},children:"Sign in with Google"}),(0,u.jsx)("div",{style:{overflow:"hidden"},children:(0,u.jsx)(W.Z,{events:n,style:{height:"100vh"},dateCellRender:function(e,t){var i=e.format("YYYY-MM-DD"),a=n.find((function(e){return e.start.format("YYYY-MM-DD")===i}));if(a){var o=Math.floor(Math.random()*l.length);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{children:a.title}),(0,u.jsx)("span",{children:a.lecturer}),(0,u.jsx)("div",{style:{position:"absolute",top:35,right:175,width:"8px",height:"8px",borderRadius:"50%",backgroundColor:l[o]}})]})})}return null}})})]})},Y=n(99660),q=n(10493),B=n(13876),R=function(e){switch(e){case"application/pdf":return(0,u.jsx)(Y.Z,{style:{fontSize:"24px"}});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return(0,u.jsx)(q.Z,{style:{fontSize:"24px"}});case"application/vnd.oasis.opendocument.spreadsheet":case"text/plain":return(0,u.jsx)(B.Z,{style:{fontSize:"24px"}});default:return null}},K=function(e){e.type;var t=(0,O.Z)(),n=(0,i.useState)([]),a=(0,o.Z)(n,2),r=a[0],l=a[1],f=(0,i.useState)(null),p=(0,o.Z)(f,2),h=p[0],m=p[1],x=(0,i.useState)([]),v=(0,o.Z)(x,2),Z=v[0],j=v[1],y=(0,i.useState)([]),b=(0,o.Z)(y,2),w=b[0],C=b[1],S=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user})),P=function(){var e=(0,F.Z)((0,k.Z)().mark((function e(n){var i;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(n.file.originFileObj);case 2:i=e.sent,Z.push({file:i,code:t.isMedia.includes(n.file.type),name:n.file.name,dataFile:n.file.originFileObj}),j(Z),Z.length===n.fileList.length&&(Z.forEach((function(e){var t=new FormData;t.append("file",e.code?e.file:e.dataFile,e.code?void 0:e.name),t.append("type","local"),w.push(new Promise((function(e,n){d.xy.post("/api/storage",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))),C(w)})),Promise.all(w).finally((function(){L(),j([]),C([]),m([])})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){d.xy.get("/api/storage/local").then((function(e){l(e.data)})).catch((function(){console.log("error")}))};(0,i.useEffect)((function(){L()}),[S.id]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I.Z,{children:(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(M.Z,{name:"media",listType:"picture-card",className:"media-uploader",customRequest:function(){},beforeUpload:t.beforeUploadFile,onChange:P,fileList:(null===h||void 0===h?void 0:h.fileList)||[],maxCount:10,multiple:!0,children:"Upload File"})})}),(0,u.jsx)(s.ZP,{itemLayout:"vertical",dataSource:r,className:"storage-lists",grid:{gutter:16,column:3},renderItem:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.ZP.Item,{children:[(0,u.jsx)(s.ZP.Item.Meta,{onClick:function(){window.open(d.cV[8003]+e.path,"_blank")},avatar:R(e.mimeType),title:e.name}),(0,u.jsx)("div",{children:(0,u.jsx)(g.Z,{icon:(0,u.jsx)(A.Z,{}),danger:!0,onClick:function(){return t=e.id,void d.xy.delete("/api/storage/".concat(t)).then((function(){L()})).catch((function(e){console.log(e)}));var t},children:"Delete"})})]})})}})]})},V=function(e){switch(e){case"application/pdf":return(0,u.jsx)(Y.Z,{style:{fontSize:"24px"}});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return(0,u.jsx)(q.Z,{style:{fontSize:"24px"}});case"application/vnd.oasis.opendocument.spreadsheet":case"text/plain":return(0,u.jsx)(B.Z,{style:{fontSize:"24px"}});default:return null}},_=function(e){e.type;var t=(0,O.Z)(),n=(0,i.useState)([]),a=(0,o.Z)(n,2),r=a[0],l=a[1],f=(0,i.useState)(null),p=(0,o.Z)(f,2),h=p[0],m=p[1],x=(0,i.useState)([]),v=(0,o.Z)(x,2),Z=v[0],j=v[1],y=(0,i.useState)([]),b=(0,o.Z)(y,2),w=b[0],C=b[1],S=(0,c.v9)((function(e){return null===e||void 0===e?void 0:e.user})),P=function(){var e=(0,F.Z)((0,k.Z)().mark((function e(n){var i;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(n.file.originFileObj);case 2:i=e.sent,Z.push({file:i,code:t.isMedia.includes(n.file.type),name:n.file.name,type:n.file.type,dataFile:n.file.originFileObj}),j(Z),Z.length===n.fileList.length&&(Z.forEach((function(e){var t=new FormData;t.append("file",e.code?e.file:e.dataFile,e.code?void 0:e.name),t.append("type","global"),t.append("courseId",S.course.id),w.push(new Promise((function(e,n){d.xy.post("/api/storage",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))),C(w)})),Promise.all(w).finally((function(){L(),j([]),C([]),m([])})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){d.xy.get("/api/storage/global/".concat(S.course.id)).then((function(e){l(e.data)})).catch((function(){console.log("error")}))};(0,i.useEffect)((function(){L()}),[S.course.id]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I.Z,{children:(0,u.jsx)(I.Z.Item,{children:(0,u.jsx)(M.Z,{name:"media",listType:"picture-card",className:"media-uploader",customRequest:function(){},beforeUpload:t.beforeUploadFile,onChange:P,fileList:(null===h||void 0===h?void 0:h.fileList)||[],maxCount:10,multiple:!0,children:"Upload File"})})}),(0,u.jsx)(s.ZP,{itemLayout:"vertical",dataSource:r,className:"storage-lists",grid:{gutter:16,column:3},renderItem:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.ZP.Item,{children:[(0,u.jsx)(s.ZP.Item.Meta,{onClick:function(){window.open(d.cV[8003]+e.path,"_blank")},avatar:V(e.mimeType),title:e.name}),(0,u.jsx)("div",{children:(0,u.jsx)(g.Z,{icon:(0,u.jsx)(A.Z,{}),danger:!0,onClick:function(){return t=e.id,void d.xy.delete("/api/storage/".concat(t)).then((function(){L()})).catch((function(e){console.log(e)}));var t},children:"Delete"})})]})})}})]})},G=function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.AW,{exact:!0,path:"/dashboard",children:(0,u.jsx)(S,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/account",children:(0,u.jsx)(m.Z,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/teachers",children:(0,u.jsx)(p,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/students",children:(0,u.jsx)(f,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/notes",children:(0,u.jsx)(h.Z,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/local",children:(0,u.jsx)(K,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/global",children:(0,u.jsx)(_,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/questions",children:(0,u.jsx)(x.Z,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/posts",children:(0,u.jsx)(U,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/calendar",children:(0,u.jsx)(E,{})}),(0,u.jsx)(a.AW,{path:"/dashboard/tags",children:(0,u.jsx)(T.Z,{})})]})}}}]);
//# sourceMappingURL=495.24156ef4.chunk.js.map