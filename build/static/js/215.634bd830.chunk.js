"use strict";(self.webpackChunkteam=self.webpackChunkteam||[]).push([[215],{32517:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ee}});var o=n(72791),i=n(64880),r=n(13592),a=n(9310),l=n(4942),c=n(1413),s=n(93433),u=n(29439),d=n(66818),f=n(30303),p=n(78792),h=n(63254),m=n(36508),v=n(92995),x=n(71482),g=(n(1287),n(80184)),Z=d.Z.Option,b=function(e,t){var n=(0,o.useState)([]),i=(0,u.Z)(n,2),r=i[0],a=i[1],b=(0,o.useState)(null),y=(0,u.Z)(b,2),S=y[0],w=y[1],j=(0,o.useState)([]),C=(0,u.Z)(j,2),E=C[0],P=C[1],k=(0,o.useState)({}),F=(0,u.Z)(k,2),I=F[0],N=F[1];return(0,o.useEffect)((function(){h.ZP.get("/api/teacher/courses").then((function(e){var t;a(e.data),w(null===(t=e.data)||void 0===t?void 0:t[0].id)})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){S&&h.w3.get("/api/forum?courseId=".concat(S," ")).then((function(e){P(e.data.data)})).catch((function(e){console.log(e)}))}),[S]),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.Z,{defaultValue:S,style:{width:"150px"},onChange:function(e){w(e)},children:r.map((function(e){return(0,g.jsx)(Z,{value:e.id,children:e.name},e.id)}))}),(0,g.jsx)("div",{style:{marginTop:10},children:E&&(0,g.jsx)(f.Z,{children:(0,g.jsx)(p.ZP,{className:"demo-loadmore-list",itemLayout:"vertical",dataSource:Array.isArray(E)?(0,s.Z)(E):[E],renderItem:function(e){return(0,g.jsx)(f.Z,{style:{marginTop:10},actions:[(0,g.jsx)(m.Z,{id:null===e||void 0===e?void 0:e.id,likedByMe:null===e||void 0===e?void 0:e.likedByMe})].concat((0,s.Z)(e.commentsUrl?[(0,g.jsx)(v.Z,{onClick:function(){return N((0,c.Z)((0,c.Z)({},I),{},(0,l.Z)({},e.id,!I[e.id])))}},"comment")]:[])),children:(0,g.jsx)(x.Z,{item:e,mediaKey:"question"})},e.id)}})})})]})},y=n(59434),S=(n(23267),function(){var e=(0,o.useState)(null),t=(0,u.Z)(e,2),n=t[0],i=t[1];return(0,o.useEffect)((function(){h.ZP.get("/api/teacher/courses").then((function(e){i(e.data)})).catch((function(){return i([])}))}),[]),(0,g.jsx)(f.Z,{className:"list",children:n?(0,g.jsx)(p.ZP,{className:"demo-loadmore-list",itemLayout:"horizontal",dataSource:n,renderItem:function(e){return(0,g.jsx)(p.ZP.Item,{children:(0,g.jsx)(p.ZP.Item.Meta,{title:e.degree+" "+e.number+" "+e.type,description:!0})})}}):(0,g.jsx)(g.Fragment,{children:" "})})}),w=n(74165),j=n(15861),C=n(5954),E=n(55518),P=n(77979),k=n(99660),F=n(10493),I=n(13876),N=n(87462),O=n(81694),z=n.n(O),R=n(45987),A=n(75179),D=n(85501),T=n(11354),L=(n(60632),n(97537)),W=n(15671),B=n(43144),H=n(60136),M=n(54062),U=n(72378),V=n(82257),K=o.createContext(null);var X=function(e){var t=o.useContext(K),n=t.notFoundContent,i=t.activeIndex,r=t.setActiveIndex,a=t.selectOption,l=t.onFocus,c=t.onBlur,s=e.prefixCls,u=e.options,d=u[i]||{};return o.createElement(V.ZP,{prefixCls:"".concat(s,"-menu"),activeKey:d.key,onSelect:function(e){var t=e.key,n=u.find((function(e){return e.key===t}));a(n)},onFocus:l,onBlur:c},u.map((function(e,t){var n=e.key,i=e.disabled,a=e.children,l=e.className,c=e.style;return o.createElement(V.sN,{key:n,disabled:i,className:l,style:c,onMouseEnter:function(){r(t)}},a)})),!u.length&&o.createElement(V.sN,{disabled:!0},n))},Y={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomLeft:{points:["tr","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["br","tl"],offset:[0,-4],overflow:{adjustX:1,adjustY:1}}},_=function(e){(0,H.Z)(n,e);var t=(0,M.Z)(n);function n(){var e;return(0,W.Z)(this,n),(e=t.apply(this,arguments)).getDropdownPrefix=function(){return"".concat(e.props.prefixCls,"-dropdown")},e.getDropdownElement=function(){var t=e.props.options;return o.createElement(X,{prefixCls:e.getDropdownPrefix(),options:t})},e.getDropDownPlacement=function(){var t=e.props,n=t.placement;return"rtl"===t.direction?"top"===n?"topLeft":"bottomLeft":"top"===n?"topRight":"bottomRight"},e}return(0,B.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.visible,i=e.transitionName,r=e.getPopupContainer,a=this.getDropdownElement();return o.createElement(U.Z,{prefixCls:this.getDropdownPrefix(),popupVisible:n,popup:a,popupPlacement:this.getDropDownPlacement(),popupTransitionName:i,builtinPlacements:Y,getPopupContainer:r,popupClassName:this.props.dropdownClassName},t)}}]),n}(o.Component),q=_,G=function(){return null};function Q(e){return(e||"").toLowerCase()}function J(e,t){var n=t.measureLocation,o=t.prefix,i=t.targetText,r=t.selectionStart,a=t.split,l=e.slice(0,n);l[l.length-a.length]===a&&(l=l.slice(0,l.length-a.length)),l&&(l="".concat(l).concat(a));var c=function(e,t,n){var o=e[0];if(!o||o===n)return e;for(var i=e,r=t.length,a=0;a<r;a+=1){if(Q(i[a])!==Q(t[a])){i=i.slice(a);break}a===r-1&&(i=i.slice(r))}return i}(e.slice(r),i.slice(r-n-o.length),a);c.slice(0,a.length)===a&&(c=c.slice(a.length));var s="".concat(l).concat(o).concat(i).concat(a);return{text:"".concat(s).concat(c),selectionLocation:s.length}}var $=o.forwardRef((function(e,t){var n=e.prefixCls,i=e.className,r=e.style,a=e.prefix,l=e.split,s=e.notFoundContent,d=e.value,f=e.defaultValue,p=e.children,h=e.open,m=e.validateSearch,v=e.filterOption,x=e.onChange,g=e.onKeyDown,Z=e.onKeyUp,b=e.onPressEnter,y=e.onSearch,S=e.onSelect,w=e.onFocus,j=e.onBlur,C=e.transitionName,E=e.placement,P=e.direction,k=e.getPopupContainer,F=e.dropdownClassName,I=(0,R.Z)(e,["prefixCls","className","style","prefix","split","notFoundContent","value","defaultValue","children","open","validateSearch","filterOption","onChange","onKeyDown","onKeyUp","onPressEnter","onSearch","onSelect","onFocus","onBlur","transitionName","placement","direction","getPopupContainer","dropdownClassName"]),O=Array.isArray(a)?a:[a],W=(0,c.Z)((0,c.Z)({},e),{},{prefix:O}),B=(0,o.useRef)(null),H=(0,o.useRef)(null),M=function(){var e,t;return null===(e=B.current)||void 0===e||null===(t=e.resizableTextArea)||void 0===t?void 0:t.textArea};o.useImperativeHandle(t,(function(){var e,t;return{focus:function(){var e;return null===(e=B.current)||void 0===e?void 0:e.focus()},blur:function(){var e;return null===(e=B.current)||void 0===e?void 0:e.blur()},textarea:null===(e=B.current)||void 0===e||null===(t=e.resizableTextArea)||void 0===t?void 0:t.textArea}}));var U=(0,o.useState)(!1),V=(0,u.Z)(U,2),X=V[0],Y=V[1],_=(0,o.useState)(""),G=(0,u.Z)(_,2),Q=G[0],$=G[1],ee=(0,o.useState)(""),te=(0,u.Z)(ee,2),ne=te[0],oe=te[1],ie=(0,o.useState)(0),re=(0,u.Z)(ie,2),ae=re[0],le=re[1],ce=(0,o.useState)(0),se=(0,u.Z)(ce,2),ue=se[0],de=se[1],fe=(0,o.useState)(!1),pe=(0,u.Z)(fe,2),he=pe[0],me=pe[1],ve=(0,A.Z)("",{defaultValue:f,value:d}),xe=(0,u.Z)(ve,2),ge=xe[0],Ze=xe[1];(0,o.useEffect)((function(){X&&H.current&&(H.current.scrollTop=M().scrollTop)}),[X]);var be=o.useMemo((function(){if(h){0;for(var e=0;e<O.length;e+=1){var t=O[e],n=ge.lastIndexOf(t);if(n>=0)return[!0,"",t,n]}}return[X,Q,ne,ae]}),[h,X,O,ge,Q,ne,ae]),ye=(0,u.Z)(be,4),Se=ye[0],we=ye[1],je=ye[2],Ce=ye[3],Ee=o.useCallback((function(e){return(0,D.Z)(p).map((function(e){var t=e.props,n=e.key;return(0,c.Z)((0,c.Z)({},t),{},{key:n||t.value})})).filter((function(t){return!1===v||v(e,t)}))}),[p,v]),Pe=o.useMemo((function(){return Ee(we)}),[Ee,we]),ke=function(){var e=(0,o.useState)({id:0,callback:null}),t=(0,u.Z)(e,2),n=t[0],i=t[1],r=(0,o.useCallback)((function(e){i((function(t){return{id:t.id+1,callback:e}}))}),[]);return(0,o.useEffect)((function(){var e;null===(e=n.callback)||void 0===e||e.call(n)}),[n]),r}(),Fe=function(e){Y(!1),le(0),$(""),ke(e)},Ie=function(e){Ze(e),null===x||void 0===x||x(e)},Ne=function(e){var t,n=e.value,o=J(ge,{measureLocation:Ce,targetText:void 0===n?"":n,prefix:je,selectionStart:null===(t=M())||void 0===t?void 0:t.selectionStart,split:l}),i=o.text,r=o.selectionLocation;Ie(i),Fe((function(){var e,t;e=M(),t=r,e.setSelectionRange(t,t),e.blur(),e.focus()})),null===S||void 0===S||S(e,je)},Oe=(0,o.useRef)(),ze=function(e){window.clearTimeout(Oe.current),!he&&e&&w&&w(e),me(!0)},Re=function(e){Oe.current=window.setTimeout((function(){me(!1),Fe(),null===j||void 0===j||j(e)}),0)};return o.createElement("div",{className:z()(n,i),style:r},o.createElement(L.Z,(0,N.Z)({ref:B,value:ge},I,{onChange:function(e){var t=e.target.value;Ie(t)},onKeyDown:function(e){var t=e.which;if(null===g||void 0===g||g(e),Se)if(t===T.Z.UP||t===T.Z.DOWN){var n=Pe.length,o=t===T.Z.UP?-1:1;de((ue+o+n)%n),e.preventDefault()}else if(t===T.Z.ESC)Fe();else if(t===T.Z.ENTER){if(e.preventDefault(),!Pe.length)return void Fe();var i=Pe[ue];Ne(i)}},onKeyUp:function(e){var t=e.key,n=e.which,o=function(e){var t=e.selectionStart;return e.value.slice(0,t)}(e.target),i=function(e,t){return t.reduce((function(t,n){var o=e.lastIndexOf(n);return o>t.location?{location:o,prefix:n}:t}),{location:-1,prefix:""})}(o,O),r=i.location,a=i.prefix;if(null===Z||void 0===Z||Z(e),-1===[T.Z.ESC,T.Z.UP,T.Z.DOWN,T.Z.ENTER].indexOf(n))if(-1!==r){var l=o.slice(r+a.length),c=m(l,W),s=!!Ee(l).length;c?(t===a||"Shift"===t||Se||l!==we&&s)&&function(e,t,n){Y(!0),$(e),oe(t),le(n),de(0)}(l,a,r):Se&&Fe(),y&&c&&y(l,a)}else Se&&Fe()},onPressEnter:function(e){!Se&&b&&b(e)},onFocus:ze,onBlur:Re})),Se&&o.createElement("div",{ref:H,className:"".concat(n,"-measure")},ge.slice(0,Ce),o.createElement(K.Provider,{value:{notFoundContent:s,activeIndex:ue,setActiveIndex:de,selectOption:Ne,onFocus:function(){ze()},onBlur:function(){Re()}}},o.createElement(q,{prefixCls:n,transitionName:C,placement:E,direction:P,options:Pe,visible:!0,getPopupContainer:k,dropdownClassName:F},o.createElement("span",null,je))),ge.slice(Ce+je.length)))}));$.defaultProps={prefixCls:"rc-mentions",prefix:"@",split:" ",validateSearch:function(e,t){var n=t.split;return!n||-1===e.indexOf(n)},filterOption:function(e,t){var n=t.value,o=void 0===n?"":n,i=e.toLowerCase();return-1!==o.toLowerCase().indexOf(i)},notFoundContent:"Not Found",rows:1},$.Option=G;var ee=$,te=n(88834),ne=n(71929),oe=n(97908),ie=n(91940),re=n(77268),ae=n(14692),le=n(72866),ce=n(26264),se=n(55564),ue=n(67521),de=function(e){var t,n=e.componentCls,o=e.colorTextDisabled,i=e.controlItemBgHover,r=e.controlPaddingHorizontal,a=e.colorText,c=e.motionDurationSlow,s=e.lineHeight,u=e.controlHeight,d=e.inputPaddingHorizontal,f=e.inputPaddingVertical,p=e.fontSize,h=e.colorBgElevated,m=e.borderRadiusLG,v=e.boxShadowSecondary,x=Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2);return(0,l.Z)({},""+n,(0,N.Z)((0,N.Z)((0,N.Z)((0,N.Z)((0,N.Z)({},(0,ue.Wf)(e)),(0,ce.ik)(e)),{position:"relative",display:"inline-block",height:"auto",padding:0,overflow:"hidden",lineHeight:s,whiteSpace:"pre-wrap",verticalAlign:"bottom"}),(0,ce.bi)(e)),(t={"&-disabled":{"> textarea":(0,N.Z)({},(0,ce.Xy)(e))},"&-focused":(0,N.Z)({},(0,ce.M1)(e))},(0,l.Z)(t,"&-affix-wrapper "+n+"-suffix",{position:"absolute",top:0,insetInlineEnd:d,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto"}),(0,l.Z)(t,"> textarea, "+n+"-measure",{color:a,boxSizing:"border-box",minHeight:u-2,margin:0,padding:f+"px "+d+"px",overflow:"inherit",overflowX:"hidden",overflowY:"auto",fontWeight:"inherit",fontSize:"inherit",fontFamily:"inherit",fontStyle:"inherit",fontVariant:"inherit",fontSizeAdjust:"inherit",fontStretch:"inherit",lineHeight:"inherit",direction:"inherit",letterSpacing:"inherit",whiteSpace:"inherit",textAlign:"inherit",verticalAlign:"top",wordWrap:"break-word",wordBreak:"inherit",tabSize:"inherit"}),(0,l.Z)(t,"> textarea",(0,N.Z)({width:"100%",border:"none",outline:"none",resize:"none",backgroundColor:"inherit"},(0,ce.nz)(e.colorTextPlaceholder))),(0,l.Z)(t,n+"-measure",{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:-1,color:"transparent",pointerEvents:"none","> span":{display:"inline-block",minHeight:"1em"}}),(0,l.Z)(t,"&-dropdown",(0,N.Z)((0,N.Z)({},(0,ue.Wf)(e)),(0,l.Z)({position:"absolute",top:-9999,insetInlineStart:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",fontSize:p,fontVariant:"initial",backgroundColor:h,borderRadius:m,outline:"none",boxShadow:v,"&-hidden":{display:"none"}},n+"-dropdown-menu",{maxHeight:e.dropdownHeight,marginBottom:0,paddingInlineStart:0,overflow:"auto",listStyle:"none",outline:"none","&-item":(0,N.Z)((0,N.Z)({},ue.vS),{position:"relative",display:"block",minWidth:e.controlItemWidth,padding:x+"px "+r+"px",color:a,fontWeight:"normal",lineHeight:s,cursor:"pointer",transition:"background "+c+" ease","&:hover":{backgroundColor:i},"&:first-child":{borderStartStartRadius:m,borderStartEndRadius:m,borderEndStartRadius:0,borderEndEndRadius:0},"&:last-child":{borderStartStartRadius:0,borderStartEndRadius:0,borderEndStartRadius:m,borderEndEndRadius:m},"&-disabled":{color:o,cursor:"not-allowed","&:hover":{color:o,backgroundColor:i,cursor:"not-allowed"}},"&-selected":{color:a,fontWeight:e.fontWeightStrong,backgroundColor:i},"&-active":{backgroundColor:i}})}))),t)))},fe=(0,se.Z)("Mentions",(function(e){var t=(0,ce.e5)(e);return[de(t)]}),(function(e){return{dropdownHeight:250,controlItemWidth:100,zIndexPopup:e.zIndexPopupBase+50}})),pe=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},he=ee.Option;function me(){return!0}var ve=function(e,t){var n,i=e.prefixCls,r=e.className,a=e.disabled,c=e.loading,s=e.filterOption,d=e.children,f=e.notFoundContent,p=e.status,h=e.popupClassName,m=pe(e,["prefixCls","className","disabled","loading","filterOption","children","notFoundContent","status","popupClassName"]),v=o.useState(!1),x=(0,u.Z)(v,2),g=x[0],Z=x[1],b=o.useRef(),y=(0,te.sQ)(t,b),S=o.useContext(ne.E_),w=S.getPrefixCls,j=S.renderEmpty,C=S.direction,E=o.useContext(ie.aM),P=E.status,k=E.hasFeedback,F=E.feedbackIcon,I=(0,le.F)(P,p),O=w("mentions",i),R=fe(O),A=(0,u.Z)(R,2),D=A[0],T=A[1],L=z()((n={},(0,l.Z)(n,O+"-disabled",a),(0,l.Z)(n,O+"-focused",g),(0,l.Z)(n,O+"-rtl","rtl"===C),n),(0,le.Z)(O,I),!k&&r,T),W=o.createElement(ee,(0,N.Z)({prefixCls:O,notFoundContent:void 0!==f?f:(j||oe.Z)("Select"),className:L,disabled:a,direction:C},m,{filterOption:c?me:s,onFocus:function(){m.onFocus&&m.onFocus.apply(m,arguments),Z(!0)},onBlur:function(){m.onBlur&&m.onBlur.apply(m,arguments),Z(!1)},dropdownClassName:z()(h,T),ref:y}),c?o.createElement(he,{value:"ANTD_SEARCHING",disabled:!0},o.createElement(ae.Z,{size:"small"})):d);return k?o.createElement("div",{className:z()(O+"-affix-wrapper",(0,le.Z)(O+"-affix-wrapper",I,k),r,T)},W,o.createElement("span",{className:O+"-suffix"},F)):D(W)},xe=o.forwardRef(ve);xe.Option=he;var ge=(0,re.Z)(xe,"mentions");xe._InternalPanelDoNotUseOrYouWillBeFired=ge,xe.getMentions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,o=void 0===n?"@":n,i=t.split,r=void 0===i?" ":i,a=Array.isArray(o)?o:[o];return e.split(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;return a.some((function(n){return e.slice(0,n.length)===n&&(t=n,!0)})),null!==t?{prefix:t,value:e.slice(t.length)}:null})).filter((function(e){return!!e&&!!e.value}))};var Ze=function(e){switch(e){case"application/pdf":return(0,g.jsx)(k.Z,{size:"32"});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return(0,g.jsx)(F.Z,{size:"32"});case"application/vnd.oasis.opendocument.spreadsheet":case"text/plain":return(0,g.jsx)(I.Z,{size:"32"});default:return null}},be=function(e){e.type;var t=(0,P.Z)(),n=(0,o.useState)([]),i=(0,u.Z)(n,2),r=i[0],a=i[1],l=(0,o.useState)(null),c=(0,u.Z)(l,2),s=c[0],f=c[1],m=(0,o.useState)([]),v=(0,u.Z)(m,2),x=v[0],Z=v[1],b=(0,o.useState)([]),y=(0,u.Z)(b,2),S=y[0],k=y[1],F=(0,o.useState)([]),I=(0,u.Z)(F,2),N=I[0],O=I[1],z=(0,o.useState)(null),R=(0,u.Z)(z,2),A=R[0],D=R[1],T=(0,o.useState)([]),L=(0,u.Z)(T,2),W=(L[0],L[1]);(0,o.useEffect)((function(){h.ZP.get("/api/teacher/courses").then((function(e){var t;O(e.data),D(null===(t=e.data)||void 0===t?void 0:t[0].id)})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){A&&h.w3.get("/api/forum?courseId=".concat(A," ")).then((function(e){W(e.data.data)})).catch((function(e){console.log(e)}))}),[A]),(0,o.useEffect)((function(){H()}),[A]);var B=function(){var e=(0,j.Z)((0,w.Z)().mark((function e(n){var o;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(n),e.next=3,t.init(n.file.originFileObj);case 3:o=e.sent,x.push({file:o,code:t.isMedia.includes(n.file.type),name:n.file.name,type:n.file.type,dataFile:n.file.originFileObj}),Z(x),x.length===n.fileList.length&&(x.forEach((function(e){var t=new FormData;t.append("file",e.code?e.file:e.dataFile,e.code?void 0:e.name),t.append("type","global"),t.append("courseId",A),S.push(new Promise((function(e,n){h.xy.post("/api/storage",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))),k(S)})),Promise.all(S).finally((function(){H(),Z([]),k([]),f([])})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){h.xy.get("/api/storage/global/".concat(A)).then((function(e){a(e.data)})).catch((function(){console.log("error")}))};return(0,o.useEffect)((function(){H()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{defaultValue:A,style:{width:"150px"},onChange:B,children:N.map((function(e){return(0,g.jsx)(he,{value:e.id,children:e.name},e.id)}))}),(0,g.jsx)(C.Z,{children:(0,g.jsx)(C.Z.Item,{children:(0,g.jsx)(E.Z,{name:"media",listType:"picture-card",className:"media-uploader",customRequest:function(){},beforeUpload:t.beforeUploadFile,onChange:B,fileList:(null===s||void 0===s?void 0:s.fileList)||[],maxCount:10,multiple:!0,children:"Upload File"})})}),(0,g.jsx)(p.ZP,{itemLayout:"vertical",dataSource:r,className:"storage-lists",grid:{gutter:16,column:3},renderItem:function(e){return(0,g.jsx)(p.ZP.Item,{children:(0,g.jsx)(p.ZP.Item.Meta,{onClick:function(){window.open(h.cV[8003]+e.path,"_blank")},avatar:Ze(e.mimeType),title:e.name})})}})]})},ye=n(87309),Se=n(82622),we=function(e){switch(e){case"application/pdf":return(0,g.jsx)(k.Z,{style:{fontSize:"24px"}});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return(0,g.jsx)(F.Z,{style:{fontSize:"24px"}});case"application/vnd.oasis.opendocument.spreadsheet":case"text/plain":return(0,g.jsx)(I.Z,{style:{fontSize:"24px"}});default:return null}},je=function(e){e.type;var t=(0,P.Z)(),n=(0,o.useState)([]),i=(0,u.Z)(n,2),r=i[0],a=i[1],l=(0,o.useState)(null),c=(0,u.Z)(l,2),s=c[0],d=c[1],f=(0,o.useState)([]),m=(0,u.Z)(f,2),v=m[0],x=m[1],Z=(0,o.useState)([]),b=(0,u.Z)(Z,2),S=b[0],k=b[1],F=(0,y.v9)((function(e){return null===e||void 0===e?void 0:e.user})),I=function(){var e=(0,j.Z)((0,w.Z)().mark((function e(n){var o;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init(n.file.originFileObj);case 2:o=e.sent,v.push({file:o,code:t.isMedia.includes(n.file.type),name:n.file.name,dataFile:n.file.originFileObj}),x(v),v.length===n.fileList.length&&(v.forEach((function(e){var t=new FormData;t.append("file",e.code?e.file:e.dataFile,e.code?void 0:e.name),t.append("type","local"),S.push(new Promise((function(e,n){h.xy.post("/api/storage",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))),k(S)})),Promise.all(S).finally((function(){N(),x([]),k([]),d([])})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){h.xy.get("/api/storage/local").then((function(e){a(e.data)})).catch((function(){console.log("error")}))};(0,o.useEffect)((function(){N()}),[F.id]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C.Z,{children:(0,g.jsx)(C.Z.Item,{children:(0,g.jsx)(E.Z,{name:"media",listType:"picture-card",className:"media-uploader",customRequest:function(){},beforeUpload:t.beforeUploadFile,onChange:I,fileList:(null===s||void 0===s?void 0:s.fileList)||[],maxCount:10,multiple:!0,children:"Upload File"})})}),(0,g.jsx)(p.ZP,{itemLayout:"vertical",dataSource:r,className:"storage-lists",grid:{gutter:16,column:3},renderItem:function(e){return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(p.ZP.Item,{children:[(0,g.jsx)(p.ZP.Item.Meta,{onClick:function(){window.open(h.cV[8003]+e.path,"_blank")},avatar:we(e.mimeType),title:e.name}),(0,g.jsx)("div",{children:(0,g.jsx)(ye.Z,{icon:(0,g.jsx)(Se.Z,{}),danger:!0,onClick:function(){return t=e.id,void h.xy.delete("/api/storage/".concat(t)).then((function(){N()})).catch((function(e){console.log(e)}));var t},children:"Delete"})})]})})}})]})},Ce=n(33972),Ee=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.AW,{exact:!0,path:"/dashboard",children:(0,g.jsx)(b,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/account",children:(0,g.jsx)(r.Z,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/local",children:(0,g.jsx)(je,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/global",children:(0,g.jsx)(be,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/courses",children:(0,g.jsx)(S,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/notes",children:(0,g.jsx)(Ce.Z,{})}),(0,g.jsx)(i.AW,{path:"/dashboard/questions",children:(0,g.jsx)(a.Z,{})})]})}}}]);
//# sourceMappingURL=215.634bd830.chunk.js.map